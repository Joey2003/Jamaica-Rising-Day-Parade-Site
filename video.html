<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="Styles/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test page</title>
</head>


<body>
    <header id="header">
        <h1><span class="name">Laura Salgado</span> <span class="title">Front-end Developer</span></h1>
    </header>
    <div class="viewport-wrapper">
        <div class="content-scroll">
            <main class="main-content">

                <section class="stack">
                    <ul>
                        <li id="one"><a href="https://codepen.io/lauraculham/" target="_blank">Codepen</a></li>
                        <li id="two"><a href="#" target="_blank">LinkedIn</a></li>
                        <li id="three"><a href="#" target="_blank">Twitter</a></li>
                        <li id="four"><a href="#">normiljoey4<span>@gmail.com</span></a></li>
                    </ul>
                    <div id="video_01" class="sv-wrapper" data-duration="8.00">
                        <div class="sv-pin-container">
                            <video class="sv-video" tabindex="-1" width="1920" height="1080" alt="" preload="none"
                                webkit-playsinline playsinline muted crossorigin src="Images/output_bg.mp4"
                                poster="https://www.lessrain.com/dev/videos/forest/forest_poster.webp"></video>



                            <!-- <div class="sv-cue" data-cue-start="0.25" data-cue-end="0.50">
                                <div class="sv-cue-content">
                                    <h2>Above the Canopy</h2>
                                    <p>A slow drift opens the scene.</p>
                                </div>
                            </div>

                            <div class="sv-cue" data-cue-start="0.75" data-cue-end="1.0">
                                <div class="sv-cue-content">
                                    <h2>Stillness and Space</h2>
                                    <p>The forest unfolds with quiet motion.</p>
                                </div>
                            </div>

                            <div class="sv-cue" data-cue-start="1.25" data-cue-end="2.0">
                                <div class="sv-cue-content">
                                    <h2>Distant Ridges</h2>
                                    <p>Mist and mountain shapes blend together.</p>
                                </div>
                            </div> -->

                            <div class="sv-preloader"></div>
                        </div>
                        <div class="sv-overlay-track">
                            <div class="sv-overlay-markers"></div>

                        </div>
                    </div>
                </section>

                <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollSmoother.min.js"></script>
                <script src="https://assets.codepen.io/573855/utils-v3.js"></script>

                <!-- Your app files AFTER the libs. Keep only one gsap core include (remove Scripts/gsap.min.js if it's the same). -->
                <script src="Scripts/scrollPlay.js"></script>
                <!-- <script src="Scripts/zoomElem.js"></script> -->
                <script>
                    gsap.registerPlugin(ScrollTrigger);

                    // helper: pin + scrub + zoom + robust show/hide
                    function zoomPin(selector, scale, end = "+=300%") {
                        const el = document.querySelector(selector);
                        if (!el) return;

                        gsap.set(el, { transformOrigin: "50% 50%" });

                        gsap.timeline({
                            scrollTrigger: {
                                trigger: el,
                                start: "top top",     // tiny offset so we truly "enter" the scene
                                end,
                                scrub: true,
                                pin: true,
                                pinSpacing: false,       // keep it overlaid on the video
                                anticipatePin: 1,        // stabilizes first enter with pins
                                onEnter: () => el.classList.add("showing"),
                                onEnterBack: () => el.classList.add("showing"),
                                onLeave: () => el.classList.remove("showing"),
                                onLeaveBack: () => el.classList.remove("showing"),
                                // markers: true
                            }
                        })
                            .to(el, { scale, ease: "none" }); // ease "none" plays nicest with scrub
                    }

                    // init after your smoother + video scrub are set up
                    function initZoomScenes() {
                        if (!matchMedia("(min-width: 768px)").matches) return;
                        zoomPin("#one", 100, "+=100%");
                        zoomPin("#two", 100, "+=100%");
                        zoomPin("#three", 100, "+=100%");
                        zoomPin("#four", 10, "+=280%");

                        // bottom-of-page toggle (same as before)
                        const emailLink = document.querySelector("#four a");
                        if (emailLink) {
                            const computeBottomPoint = () =>
                                document.documentElement.scrollHeight - window.innerHeight * 1.5;

                            ScrollTrigger.create({
                                start: () => computeBottomPoint(),
                                end: () => computeBottomPoint() + 1,
                                onEnter: () => emailLink.classList.add("email-showing"),
                                onLeaveBack: () => emailLink.classList.remove("email-showing")
                            });
                        }
                    }

                    // call after your existing DOMContentLoaded init (smoother + scrub)
                    document.addEventListener("DOMContentLoaded", () => {
                        // ... your existing init code already runs here ...
                        initZoomScenes();
                        ScrollTrigger.refresh();
                    });

                </script>
            </main>
        </div>
    </div>
</body>

</html>